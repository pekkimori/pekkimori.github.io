---
type LanguageOption = {
  label: string;
  href: string;
  isActive: boolean;
};

type Props = {
  languageOptions: LanguageOption[];
};

const { languageOptions } = Astro.props;

const activeLanguageIndex = Math.max(
  0,
  languageOptions.findIndex(option => option.isActive)
);
---

{
  languageOptions.length > 1 && (
    <div
      transition:name="post-language-switch"
      class="relative inline-flex items-center rounded-full border border-muted bg-muted p-1"
      style={`--active-index:${activeLanguageIndex};--options-count:${languageOptions.length};`}
    >
      <span
        aria-hidden="true"
        class="pointer-events-none absolute top-1 bottom-1 left-1 rounded-full bg-background shadow-sm"
        style="width:calc((100% - 0.5rem) / var(--options-count));transform:translateX(calc(var(--active-index) * 100%));transition:transform 0.4s cubic-bezier(0.34,1.56,0.64,1),box-shadow 0.3s ease;"
      ></span>
      {languageOptions.map(option => (
        <a
          href={option.href}
          class:list={[
            "relative z-10 rounded-full px-2 py-1 text-xs font-medium active:scale-90",
            option.isActive
              ? "text-accent"
              : "text-foreground/60 hover:text-foreground/90",
          ]}
          style="transition:color 0.3s ease,transform 0.15s ease;"
          aria-current={option.isActive ? "page" : undefined}
        >
          {option.label}
        </a>
      ))}
    </div>
  )
}
